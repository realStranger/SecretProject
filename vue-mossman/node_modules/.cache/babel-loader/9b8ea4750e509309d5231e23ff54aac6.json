{"remainingRequest":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/thread-loader/dist/cjs.js!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/babel-loader/lib/index.js!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/OrderList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/OrderList.vue","mtime":1595926212619},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHBhZ2VyTWl4aW4gZnJvbSAiLi4vbWl4aW5zL1BhZ2VyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3JkZXJMaXN0JywKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkRGF0YSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHBhZ2VOdW06IGZ1bmN0aW9uIHBhZ2VOdW0odmFsLCBvbGRWYWwpIHsKICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgfSwKICAgIGZpbHRlcjogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZpbHRlclRpbWVvdXQpOwogICAgICAgIHRoaXMuZmlsdGVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMubG9hZERhdGEoKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfQogICAgfQogIH0sCiAgbWl4aW5zOiBbcGFnZXJNaXhpbl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNpdGllczogW10sCiAgICAgIHR5cGVzOiBbXSwKICAgICAgc3RhdHVzZXM6IFtdLAogICAgICBpdGVtczogW10sCiAgICAgIGZpbHRlclRpbWVvdXQ6IG51bGwsCiAgICAgIGZpbHRlcjogewogICAgICAgIGNpdHk6ICcnLAogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHN0YXR1czogJycsCiAgICAgICAgb3JkZXJOdW06ICcnLAogICAgICAgIGludm9pY2VOdW06ICcnLAogICAgICAgIGlubmVyQ29kZTogJycKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBCWC5hamF4LnJ1bkNvbXBvbmVudEFjdGlvbigneHBhZ2U6YWpheCcsICdvcmRlcnNHZXRMaXN0JywgewogICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgZGF0YTogewogICAgICAgICAgZmlsdGVyOiB0aGlzLmZpbHRlciwKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuaXRlbXMgPSByZXNwb25zZS5kYXRhLml0ZW1zIHx8IFtdOwogICAgICAgIF90aGlzMi5jaXRpZXMgPSByZXNwb25zZS5kYXRhLmNpdGllcyB8fCBbXTsKICAgICAgICBfdGhpczIudHlwZXMgPSByZXNwb25zZS5kYXRhLnR5cGVzIHx8IFtdOwogICAgICAgIF90aGlzMi5zdGF0dXNlcyA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzZXMgfHwgW107CiAgICAgICAgX3RoaXMyLnBhZ2VzQ250ID0gK3Jlc3BvbnNlLmRhdGEucGFnZXNDbnQgfHwgMDsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["OrderList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA,OAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,OAFA,qBAEA;AACA,SAAA,QAAA;AACA,GAJA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA,MADA,EACA;AACA,WAAA,QAAA;AACA,KAHA;AAIA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,qBAEA;AAAA;;AACA,QAAA,YAAA,CAAA,KAAA,aAAA,CAAA;AACA,aAAA,aAAA,GAAA,UAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,QAAA;AACA,SAFA,EAEA,IAFA,CAAA;AAGA;AAPA;AAJA,GALA;AAmBA,EAAA,MAAA,EAAA,CACA,UADA,CAnBA;AAsBA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,IALA;AAMA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,UAAA,EAAA,EALA;AAMA,QAAA,SAAA,EAAA;AANA;AANA,KAAA;AAAA,GAtBA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,MAAA,EAAA,CAAA,IAAA,CAAA,kBAAA,CAAA,YAAA,EAAA,eAAA,EAAA;AACA,QAAA,IAAA,EAAA,OADA;AAEA,QAAA,IAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,MADA;AAEA,UAAA,OAAA,EAAA,KAAA;AAFA;AAFA,OAAA,EAMA,IANA,CAMA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,QAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,QAAA,IAAA,CAAA;AACA,OAZA;AAaA;AAfA;AArCA,CAAA","sourcesContent":["<template>\n<div class=\"lc-body\">\n    <div class=\"lc__top\">\n        <div class=\"lc-select-cont\">\n            <form action=\"\">\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.city\" >\n                        <option value=\"\">Выбрать город</option>\n                        <option v-for=\"(city, cityKey) in cities\" :key=\"cityKey\" >{{ city }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.type\" >\n                        <option value=\"\">Выбрать тип</option>\n                        <option v-for=\"(type, typeKey) in types\" :key=\"typeKey\" >{{ type }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.status\" >\n                        <option value=\"\">Выбрать статус</option>\n                        <option v-for=\"(status, statusKey) in statuses\" :key=\"statusKey\" >{{ status }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Номер заказа</div>\n                    <input v-model=\"filter.orderNum\" class=\"\" />\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Номер счёта</div>\n                    <input v-model=\"filter.invoiceNum\" class=\"\" />\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Внутренний номер</div>\n                    <input v-model=\"filter.innerCode\" class=\"\" />\n                </div>\n            </form>\n        </div>\n        <a href=\"/lk/orders/?id=0\" class=\"lc-request-create\">Создать заказ</a>\n    </div>\n    <div class=\"lc-table\">\n        <div class=\"lc-table__list order-list\">\n            <div class=\"lc-table__head\">\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-number\">Номер заказа</div>\n                    <div class=\"lc-table__col col-date\">Дата заказа</div>\n                    <div class=\"lc-table__col col-city\">Внутренний номер</div>\n                    <div class=\"lc-table__col col-status\">Статус</div>\n                    <div class=\"lc-table__col col-btn\"></div>\n                </div>\n            </div>\n            <div v-for=\"item in items\" :key=\"item.ID\" class=\"lc-table__item order-item\" :class=\"{ 'lc-table__item--unread-messages' : item.hasUnreadMessages, }\" >\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-number\">\n                        <div class=\"order-number title\">Заказ №{{ item.UF_ORDER_NUM }}</div>\n                    </div>\n                    <div class=\"lc-table__col col-date\"><span class=\"table__col-name\">Дата заказа:</span>{{ item.UF_DATE_ADDED }}</div>\n                    <div class=\"lc-table__col col-city\"><span class=\"table__col-name\">Внутренний номер:</span>{{ item.UF_INNER_CODE }}</div>\n                    <div class=\"lc-table__col col-status\"><span class=\"table__col-name\">Статус:</span><div class=\"status ready\">{{ item.UF_STATUS }}</div></div>\n                    <div class=\"lc-table__col col-btn\">\n                        <a :href=\"`/lk/orders/?id=${item.ID}`\" class=\"btn lc-btn\">Подробнее</a>\n                    </div>\n                </div>\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-info\">\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Контрагент:</span> <b>{{ item.UF_CONTRACTOR }}</b></div>\n                            <div class=\"line-name-dop-dop\"><span class=\"line-name line-name-sum\">Сумма счета: </span><b>{{ item.UF_INVOICE_SUM }}</b></div>\n                        </div>\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Дата отгрузки:</span> <b>{{ item.UF_SHIPMENT_DATE }}</b></div>\n                        </div>\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Ответственный:</span> <b>{{ item.UF_RESPONSIBLE_NAME }}</b></div>\n                        </div>\n                        <div v-if=\"item.UF_MODEL\" class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Модель:</span> <b>{{ item.UF_MODEL }}</b></div>\n                            <div class=\"line-name-dop-dop\"><span class=\"line-name line-name-paid\">Сумма оплаты: </span><b>{{ item.UF_PAYED_SUM }}</b></div>\n                        </div>\n                        <div v-if=\"item.UF_INVOICE_NUM\" class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Счёт:</span> <b>№{{ item.UF_INVOICE_NUM }}</b> ({{ item.UF_INVOICE_DATE }})</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <pagination v-if=\"pagesCnt > 1\" v-model=\"pageNum\" :pages-cnt=\"pagesCnt\" ></pagination>\n    </div>\n</div>\n</template>\n\n<script>\n\nimport pagerMixin from '../mixins/Pager.vue';\n\nexport default {\n    name: 'OrderList',\n    mounted () {\n        this.loadData();\n    },\n    watch : {\n        pageNum (val, oldVal) {\n            this.loadData();\n        },\n        filter : {\n            deep : true,\n            handler () {\n                clearTimeout(this.filterTimeout);\n                this.filterTimeout = setTimeout(()=>{\n                    this.loadData();\n                },1000);\n            },\n        },\n    },\n    mixins : [\n        pagerMixin,\n    ],\n    data : () => ({\n        cities : [],\n        types : [],\n        statuses : [],\n        items : [],\n        filterTimeout : null,\n        filter : {\n            city : '',\n            type : '',\n            status : '',\n            orderNum : '',\n            invoiceNum : '',\n            innerCode : '',\n        },\n    }),\n    methods : {\n        loadData () {\n            BX.ajax.runComponentAction('xpage:ajax', 'ordersGetList', {\n                mode : 'class',\n                data : {\n                    filter : this.filter,\n                    pageNum : this.pageNum,\n                },\n            }).then(response => {\n                this.items = response.data.items || [];\n                this.cities = response.data.cities || [];\n                this.types = response.data.types || [];\n                this.statuses = response.data.statuses || [];\n                this.pagesCnt = +response.data.pagesCnt || 0;\n            });\n        },\n    },\n}\n</script>\n"],"sourceRoot":"src/components"}]}