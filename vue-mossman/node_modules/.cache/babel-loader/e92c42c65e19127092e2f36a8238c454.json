{"remainingRequest":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/thread-loader/dist/cjs.js!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/babel-loader/lib/index.js!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/ClaimDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/ClaimDetail.vue","mtime":1594811365150},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NsYWltRGV0YWlsJywKICBwcm9wczogewogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgdXNlckRhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9jZXNzZWQ6IGZhbHNlLAogICAgICBjbGFpbUlkOiAwLAogICAgICBpbnZvaWNlRmlsZXM6IFtdLAogICAgICBmaWxlczogW10sCiAgICAgIG5ld0ZpbGVzOiBbXSwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgVUZfTlVNOiAnJywKICAgICAgICBVRl9EQVRFX0FEREVEOiAnJywKICAgICAgICBVRl9ESVNUUklCVVRPUjogJycsCiAgICAgICAgVUZfVEVYVDogJycsCiAgICAgICAgVUZfUkVTUE9OU0U6ICcnLAogICAgICAgIFVGX0RBVEVfUkVTUE9OU0U6ICcnLAogICAgICAgIFVGX1JFU1BPTlNJQkxFX05BTUU6ICcnLAogICAgICAgIFVGX0FOU1dFUl9OQU1FOiAnJwogICAgICB9LAogICAgICBkYXRhTG9hZGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMubG9hZERhdGEoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy52YWx1ZXMuVUZfRElTVFJJQlVUT1IgJiYgX3RoaXMudXNlckRhdGEuZGlzdHJpYnV0b3JzLmxlbmd0aCkgewogICAgICAgIF90aGlzLnZhbHVlcy5VRl9ESVNUUklCVVRPUiA9IF90aGlzLnVzZXJEYXRhLmRpc3RyaWJ1dG9yc1swXS5VRl9OQU1FOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMuY2xhaW1JZCA9ICt0aGlzLmlkIHx8IDA7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWxlSW5wdXRDaGFuZ2VkOiBmdW5jdGlvbiBmaWxlSW5wdXRDaGFuZ2VkKGlucHV0KSB7CiAgICAgIHRoaXMubmV3RmlsZXMgPSBpbnB1dC5maWxlczsKICAgIH0sCiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBCWC5hamF4LnJ1bkNvbXBvbmVudEFjdGlvbigneHBhZ2U6YWpheCcsICdjbGFpbUdldCcsIHsKICAgICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiBfdGhpczIuaWQKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMyLmRhdGFMb2FkZWQgPSB0cnVlOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnZhbHVlcykgewogICAgICAgICAgICAgIF90aGlzMi4kc2V0KF90aGlzMiwgJ3ZhbHVlcycsIHJlc3BvbnNlLmRhdGEudmFsdWVzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZmlsZXMpIHsKICAgICAgICAgICAgICBfdGhpczIuZmlsZXMgPSByZXNwb25zZS5kYXRhLmZpbGVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnZvaWNlRmlsZXMpIHsKICAgICAgICAgICAgICBfdGhpczIuaW52b2ljZUZpbGVzID0gcmVzcG9uc2UuZGF0YS5pbnZvaWNlRmlsZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbGVSZW1vdmU6IGZ1bmN0aW9uIGZpbGVSZW1vdmUoZmlsZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghZmlsZS5JRCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgQlguYWpheC5ydW5Db21wb25lbnRBY3Rpb24oJ3hwYWdlOmFqYXgnLCAnY2xhaW1GaWxlUmVtb3ZlJywgewogICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgZGF0YTogewogICAgICAgICAgY2xhaW1JZDogdGhpcy5jbGFpbUlkLAogICAgICAgICAgZmlsZUlkOiBmaWxlLklECiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5sb2FkRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnByb2Nlc3NlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5wcm9jZXNzZWQgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBkYXRhLmFwcGVuZCgnaWQnLCB0aGlzLmNsYWltSWQpOwogICAgICBkYXRhLmFwcGVuZCgndmFsdWVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZXMpKTsKCiAgICAgIGlmICh0aGlzLm5ld0ZpbGVzLmxlbmd0aCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5uZXdGaWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgZGF0YS5hcHBlbmQoJ2ZpbGVzW10nLCB0aGlzLm5ld0ZpbGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIEJYLmFqYXgucnVuQ29tcG9uZW50QWN0aW9uKCd4cGFnZTphamF4JywgJ2NsYWltU2F2ZScsIHsKICAgICAgICBtb2RlOiAnY2xhc3MnLAogICAgICAgIGRhdGE6IGRhdGEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiArcmVzcG9uc2UuZGF0YS5pZCkgewogICAgICAgICAgaWYgKF90aGlzNC5jbGFpbUlkICE9ICtyZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgIF90aGlzNC5jbGFpbUlkID0gK3Jlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgIiIuY29uY2F0KGxvY2F0aW9uLnBhdGhuYW1lLCAiP2lkPSIpLmNvbmNhdChfdGhpczQuY2xhaW1JZCkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX3RoaXM0LmxvYWREYXRhKCk7CgogICAgICAgIF90aGlzNC5wcm9jZXNzZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ClaimDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div class=\"lc-body\">\n    <a href=\"/lk/claims/\" class=\"lk-back-link\">Перейти в список запросов</a>\n    <div v-if=\"dataLoaded\" class=\"lc__info request-info\">\n        <div class=\"lc-card\">\n            <div class=\"lc-card-group\">\n                <div class=\"col-left\">\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">Номер запроса</div>\n                        <div v-if=\"values.UF_NUM\" class=\"info-input-group\">\n                            <span>{{ values.UF_NUM }} от {{ values.UF_DATE_ADDED }}</span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-right\">\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">Дистрибьютер</div>\n                        <select v-if=\"userData.distributors.length\" v-model=\"values.UF_DISTRIBUTOR\" required >\n                            <option value=\"\">Выберите из списка</option>\n                            <option v-for=\"item in userData.distributors\" :key=\"item.ID\" >{{ item.UF_NAME }}</option>\n                        </select>\n                        <input v-else v-model=\"values.UF_DISTRIBUTOR\" class=\"info-input\" />\n                    </div>\n                </div>\n            </div>\n            <div class=\"lc-card-group\">\n                <div class=\"col-left\">\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">запрос</div>\n                        <textarea v-model=\"values.UF_TEXT\" class=\"info-input input-text\" ></textarea>\n                    </div>\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">Файлы:</div>\n                        <div class=\"\">\n                            <div class=\"\">\n                                <div class=\"\">\n\n                                </div>\n                                <div class=\"default-input default-input--file\" style=\"width: 200px;\">\n                                    <input class=\"default-input__input default-input__input--file\" ref=\"OrderFiles\" @change=\"fileInputChanged($event.target)\" type=\"file\" multiple id=\"price-file\" />\n                                    <div class=\"default-input__input-filetext\" style=\"margin-bottom: 20px;\">\n                                        <input class=\"default-input__input\" type=\"text\" readonly=\"\" placeholder=\"Прикрепить файл +\">\n                                        <label for=\"price-file\" class=\"default-input__label--file\"></label>\n                                    </div>\n                                    <div v-if=\"newFiles.length\" >\n                                        {{ Array.prototype.map.call(newFiles, file => file.name).join(', ') }}\n                                    </div>\n                                </div>\n                                <div class=\"\" style=\"margin-top: 20px;\">\n                                    Доступные форматы: jpg, png, gif, pdf, doc, docx, rtf, txt\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div v-if=\"files.length\" class=\"lc-info-item\">\n                        <div class=\"info-tile\">Загруженные файлы:</div>\n                        <div class=\"\">\n                            <div v-for=\"file in files\" :key=\"file.ID\" class=\"\">\n                                <a :href=\"file.SRC\" target=\"_blank\" >{{ file.ORIGINAL_NAME }}</a>\n                                <a v-if=\"!values.UF_RESPONSE\" @click.prevent=\"fileRemove(file)\" href=\"#\" >удалить</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div v-if=\"invoiceFiles.length\" class=\"lc-info-item\">\n                        <div class=\"info-tile\">Бланк счёта:</div>\n                        <div class=\"\">\n                            <div v-for=\"file in invoiceFiles\" :key=\"file.ID\" class=\"\">\n                                <a :href=\"file.SRC\" target=\"_blank\" >{{ file.ORIGINAL_NAME }}</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!-- <div class=\"col-right\">\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">номер заказа</div>\n                        <div class=\"info-input-group\">\n                            <div class=\"info-input\"></div>\n                            <span>от</span>\n                            <div class=\"info-input input-date\"></div>\n                        </div>\n                    </div>\n                    <div class=\"lc-info-item\">\n                        <div class=\"info-tile\">заказ</div>\n                        <div class=\"info-input n-wr\"></div>\n                    </div>\n                </div> -->\n            </div>\n        </div>\n        <div v-if=\"values.UF_RESPONSE\" class=\"lc-card request-answer\">\n            <div class=\"lc-info-item\">\n                <div class=\"info-tile\">ответ</div>\n                <div class=\"info-input-group answer-group\">\n                    <div class=\"col-left\">\n                        <div class=\"input-text\" v-html='values.UF_RESPONSE.replace(\"\\n\", \"<br/>\")' ></div>\n                    </div>\n                    <div class=\"col-right\">\n                        <div class=\"answer-info\">\n                            <p v-if=\"values.UF_DATE_RESPONSE\" >Дата ответа: <span n-wr>{{ values.UF_DATE_RESPONSE }}</span></p>\n                            <p v-if=\"values.UF_ANSWER_NAME\">Ответил: <span>{{ values.UF_ANSWER_NAME }}</span></p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <button @click.prevent=\"save()\" type=\"button\" class=\"arrow-btn\" name=\"save\">Сохранить</button>\n    </div>\n</div>\n</template>\n\n<script>\nexport default {\n    name : 'ClaimDetail',\n    props : {\n        id : {\n            type : Number,\n            default : 0,\n        },\n        userData : {\n            type : Object,\n            default : () => ({}),\n        },\n    },\n    data : () => ({\n        processed : false,\n        claimId : 0,\n        invoiceFiles : [],\n        files : [],\n        newFiles : [],\n        values : {\n            UF_NUM : '',\n            UF_DATE_ADDED : '',\n            UF_DISTRIBUTOR : '',\n            UF_TEXT : '',\n            UF_RESPONSE : '',\n            UF_DATE_RESPONSE : '',\n            UF_RESPONSIBLE_NAME : '',\n            UF_ANSWER_NAME : '',\n        },\n        dataLoaded : false,\n    }),\n    mounted () {\n        this.loadData()\n            .then(() => {\n                if (!this.values.UF_DISTRIBUTOR && this.userData.distributors.length) {\n                    this.values.UF_DISTRIBUTOR = this.userData.distributors[0].UF_NAME;\n                }\n            });\n        this.claimId = +this.id || 0;\n    },\n    methods : {\n        fileInputChanged (input) {\n            this.newFiles = input.files;\n        },\n        loadData () {\n            return new Promise((resolve, reject) => {\n                BX.ajax.runComponentAction('xpage:ajax', 'claimGet', {\n                    mode : 'class',\n                    data : {\n                        id : this.id,\n                    },\n                }).then(response => {\n                    this.dataLoaded = true;\n                    if (response.data) {\n                        if (response.data.values) {\n                            this.$set(this, 'values', response.data.values);\n                        }\n                        if (response.data.files) {\n                            this.files = response.data.files;\n                        }\n                        if (response.data.invoiceFiles) {\n                            this.invoiceFiles = response.data.invoiceFiles;\n                        }\n                    }\n                    resolve();\n                });\n            });\n        },\n        fileRemove (file) {\n            if (!file.ID) {\n                return;\n            }\n            BX.ajax.runComponentAction('xpage:ajax', 'claimFileRemove', {\n                mode : 'class',\n                data : {\n                    claimId : this.claimId,\n                    fileId : file.ID,\n                },\n            }).then(response => {\n                this.loadData();\n            });\n        },\n        save () {\n            if (this.processed) {\n                return;\n            }\n            this.processed = true;\n            let data = new FormData;\n            data.append('id', this.claimId);\n            data.append('values', JSON.stringify(this.values));\n            if (this.newFiles.length) {\n                for (var i = 0; i < this.newFiles.length; i++) {\n                    data.append('files[]', this.newFiles[i]);\n                }\n            }\n            BX.ajax.runComponentAction('xpage:ajax', 'claimSave', {\n                mode : 'class',\n                data,\n            }).then(response => {\n                if (response.data && +response.data.id) {\n                    if (this.claimId != +response.data.id) {\n                        this.claimId = +response.data.id;\n                        history.pushState({}, '', `${location.pathname}?id=${this.claimId}`);\n                    }\n                }\n                this.loadData();\n                this.processed = false;\n            });\n        },\n    },\n}\n</script>\n"],"sourceRoot":"src/components"}]}