{"remainingRequest":"/var/www/html/local/vue-mossman/node_modules/babel-loader/lib/index.js!/var/www/html/local/vue-mossman/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/html/local/vue-mossman/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/local/vue-mossman/src/components/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/local/vue-mossman/src/components/Chat.vue","mtime":1604916304000},{"path":"/var/www/html/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/local/vue-mossman/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/local/vue-mossman/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7Cm1vbWVudC5sb2NhbGUoJ3J1Jyk7CndpbmRvdy5tb21lbnQgPSBtb21lbnQ7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hhdCcsCiAgcHJvcHM6IHsKICAgIGNsYWltSWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgb3JkZXJJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICB1c2VyRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXBhcmVkRmlsZXM6IFtdLAogICAgICBpdGVtczogW10sCiAgICAgIHN1YmplY3Q6ICcnLAogICAgICB1c2VyUmVjaXZlOiAnJywKICAgICAgdGV4dDogJycsCiAgICAgIHZhbHVlczogewogICAgICAgIFVGX1RZUEU6ICcnLAogICAgICAgIFVGX0NPTlRSQUNUT1I6ICcnLAogICAgICAgIFVGX1BSSU1BUllfT1JERVI6ICcnLAogICAgICAgIFVGXzNDQURfU0VSVkVSX05VTTogJycsCiAgICAgICAgVUZfM0NBRF9TRVJWRVJfREFURTogJycsCiAgICAgICAgVUZfTU9ERUw6ICcnLAogICAgICAgIFVGX1NISVBNRU5UX0FERFJFU1M6ICcnLAogICAgICAgIFVGX1RSQU5TUE9SVF9DT01QQU5ZOiAnJywKICAgICAgICBVRl9DT01NRU5UOiAnJywKICAgICAgICBVRl9GQUNUT1JZX1RJVExFOiAnJywKICAgICAgICBVRl9TVU06ICcnLAogICAgICAgIFVGX0FDQ0VQVF9NTkdSX0RBVEU6ICcnLAogICAgICAgIFVGX1BST0NFU19NTkdSX0RBVEU6ICcnLAogICAgICAgIFVGX1BST0NFU1NfVEVDSF9EQVRFOiAnJywKICAgICAgICBVRl9JTlZPSUNFX05VTTogJycsCiAgICAgICAgVUZfSU5WT0lDRV9EQVRFOiAnJywKICAgICAgICBVRl9JTlZPSUNFX1NVTTogJycsCiAgICAgICAgVUZfSU5WT0lDRV9BQ1BUX0RBVEU6ICcnLAogICAgICAgIFVGX0FDQ09VTlRJTkdfREFURTogJycsCiAgICAgICAgVUZfUExBTl9EQVRFOiAnJywKICAgICAgICBVRl9SRVNQT05TSUJMRV9OQU1FOiAnJywKICAgICAgICBVRl9SRVNQT05TSUJMRV9QSE9ORTogJycsCiAgICAgICAgVUZfU1RBVFVTOiAnJywKICAgICAgICBVRl9BQ0NFUFRFRF9NQU5BR0VSOiAnJywKICAgICAgICBVRl9QUk9DRVNTRURfTUFOQUdFUjogJycsCiAgICAgICAgVUZfUFJPQ0VTU0VEX1RFQ0g6ICcnLAogICAgICAgIFVGX0lOVk9JQ0VfTkFNRTogJycsCiAgICAgICAgVUZfSU5WT0lDRV9BQ1BUX05BTUU6ICcnLAogICAgICAgIFVGX0FDQ09VTlRJTkdfTkFNRTogJycsCiAgICAgICAgVUZfQ09OVFJBQ1RPUl9DT0RFOiAnJywKICAgICAgICBVRl9JTk5FUl9DT0RFOiAnJywKICAgICAgICBVRl8zQ0FEX1NFUlZFUl9OVU1fTkVXOiAnJywKICAgICAgICBVRl9DQU5DRUxFRDogMCwKICAgICAgICBVRl9QQVVTRUQ6IDAKICAgICAgfSwKICAgICAgdXNlcnNGaWx0ZXJlZDogJycsCiAgICAgIHVzZXJzQWxsOiAnJywKICAgICAgbWVzc2FnZVNlbGVjdDogJycsCiAgICAgIG1lc3NhZ2VTZWxlY3RUZXh0OiAnJywKICAgICAgdXNlclNlbGVjdDogJycsCiAgICAgIHVucmVhZE1zZzogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXRlbXNCeURhdGU6IGZ1bmN0aW9uIGl0ZW1zQnlEYXRlKCkgewogICAgICB2YXIgaXRlbXNCeURhdGUgPSB7fSwKICAgICAgICAgIGl0ZW0sCiAgICAgICAgICBtLAogICAgICAgICAgZGF0ZTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgIGl0ZW0gPSB0aGlzLml0ZW1zW2ldOwogICAgICAgIG0gPSBtb21lbnQudW5peChpdGVtLnRpbWVzdGFtcCk7CiAgICAgICAgZGF0ZSA9IG0uZm9ybWF0KCdERCBNTU1NIFlZWVknKTsKCiAgICAgICAgaWYgKCFpdGVtc0J5RGF0ZVtkYXRlXSkgewogICAgICAgICAgaXRlbXNCeURhdGVbZGF0ZV0gPSBbXTsKICAgICAgICB9CgogICAgICAgIGl0ZW0udGltZUZvcm1hdCA9IG0uZm9ybWF0KCdISDptbScpOwogICAgICAgIGl0ZW1zQnlEYXRlW2RhdGVdLnB1c2goaXRlbSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpdGVtc0J5RGF0ZTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubG9hZERhdGEoKTsKICAgIH0sIDUwMDApOwogICAgJCgnLmxjLWNvbnQnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0aWNreSA9ICQoJy5jaGF0LW9wZW4tYnRuJyk7CiAgICAgIHZhciBzdGlja3lXcmFwID0gJCgnLmxjLWNvbnQnKTsKICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5zYyA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpOwogICAgICAgIHZhciBicDEgPSBzdGlja3lXcmFwLm9mZnNldCgpLnRvcDsKICAgICAgICB2YXIgYnAyID0gYnAxICsgc3RpY2t5V3JhcC5vdXRlckhlaWdodCgpIC0gJCh3aW5kb3cpLmhlaWdodCgpOwoKICAgICAgICBpZiAobnNjID4gYnAxKSB7CiAgICAgICAgICBzdGlja3kuY3NzKCdwb3NpdGlvbicsICdmaXhlZCcpOwogICAgICAgICAgc3RpY2t5LmFkZENsYXNzKCdmaXhlZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGlja3kuY3NzKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpOwogICAgICAgICAgc3RpY2t5LmNzcygndG9wJywgJzAgIWltcG9ydGFudCcpOwogICAgICAgICAgc3RpY2t5LnJlbW92ZUNsYXNzKCdmaXhlZCcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5zYyA+IGJwMikgewogICAgICAgICAgc3RpY2t5LmNzcygndG9wJywgYnAyIC0gbnNjKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RpY2t5LmNzcygndG9wJywgJzI0NXB4Jyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgJCgnLmNoYXQtb3Blbi1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICQoJy5jaGF0JykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOwogICAgfSk7CiAgICAkKCcuY2hhdC1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgJCgnLmNoYXQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICB9KTsKICAgICQoJy5jaGF0LXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgJCgnLmNoYXQtYm9keScpLnNsaWRlVG9nZ2xlKCk7CiAgICB9KTsKICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkgewogICAgICB2YXIgaGVpZ2h0VG9Cb3R0b21FZGdlID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgd2luZG93LmlubmVySGVpZ2h0OwogICAgICB2YXIgY2FuU2VlRm9vdGVyID0gaGVpZ2h0VG9Cb3R0b21FZGdlID4gJCgnLmZvb3RlcicpLm9mZnNldCgpLnRvcDsKCiAgICAgIGlmIChjYW5TZWVGb290ZXIgJiYgIXdpbmRvdy5hYnNvbHV0ZWQpIHsKICAgICAgICAkKCcuY2hhdCcpLnRvZ2dsZUNsYXNzKCdhYnNvbHV0ZScpOwogICAgICAgICQoJy5jaGF0JykudG9nZ2xlQ2xhc3MoJ2ZpeGVkJyk7CiAgICAgICAgd2luZG93LmFic29sdXRlZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICghY2FuU2VlRm9vdGVyICYmIHdpbmRvdy5hYnNvbHV0ZWQpIHsKICAgICAgICAkKCcuY2hhdCcpLnRvZ2dsZUNsYXNzKCdhYnNvbHV0ZScpOwogICAgICAgICQoJy5jaGF0JykudG9nZ2xlQ2xhc3MoJ2ZpeGVkJyk7CiAgICAgICAgd2luZG93LmFic29sdXRlZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9LAogIHdhdGNoOiB7CiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMobWVzc2FnZXMsIG9sZE1lc3NhZ2VzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCAhPSBvbGRNZXNzYWdlcy5sZW5ndGgpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kZWwucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGVudCcpLnNjcm9sbFRvcCA9IF90aGlzMi4kZWwucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGVudCcpLnNjcm9sbEhlaWdodCAtIF90aGlzMi4kZWwucXVlcnlTZWxlY3RvcignLmNoYXQtY29udGVudCcpLmNsaWVudEhlaWdodDsKICAgICAgICB9LCAzMDApOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgQlguYWpheC5ydW5Db21wb25lbnRBY3Rpb24oJ3hwYWdlOmFqYXgnLCAnY2hhdExvYWREYXRhJywgewogICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgZGF0YTogewogICAgICAgICAgY2xhaW1JZDogdGhpcy5jbGFpbUlkLAogICAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkLAogICAgICAgICAgdXNlclhNTDogdGhpcy51c2VyRGF0YS5YTUxfSUQsCiAgICAgICAgICB1c2VySUQ6IHRoaXMudXNlckRhdGEuSUQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLml0ZW1zICYmIHJlc3BvbnNlLmRhdGEuaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciB1bnJlYWRNc2dJZHMgPSBbXTsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gcmVzcG9uc2UuZGF0YS5pdGVtczsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoaXRlbXNbaV0uVUZfUkVBRF9VU0VSX0lEX05FVykgewogICAgICAgICAgICAgICAgaXRlbXNbaV0uVUZfUkVBRF9VU0VSX0lEX05FVyA9IGl0ZW1zW2ldLlVGX1JFQURfVVNFUl9JRF9ORVcuc3BsaXQoJywnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghaXRlbXNbaV0uVUZfUkVBRF9VU0VSX0lEX05FVyB8fCAhfml0ZW1zW2ldLlVGX1JFQURfVVNFUl9JRF9ORVcuaW5kZXhPZigrX3RoaXMzLnVzZXJEYXRhLklEKSkgewogICAgICAgICAgICAgICAgdW5yZWFkTXNnSWRzLnB1c2goaXRlbXNbaV0uSUQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMzLml0ZW1zID0gaXRlbXM7CgogICAgICAgICAgICBpZiAodW5yZWFkTXNnSWRzLmxlbmd0aCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1ib2R5Jykub2Zmc2V0UGFyZW50KSB7CiAgICAgICAgICAgICAgX3RoaXMzLnNldE1lc3NhZ2VzUmVhZCh1bnJlYWRNc2dJZHMsIF90aGlzMy51c2VyRGF0YS5YTUxfSUQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMzLiRzZXQoX3RoaXMzLCAndmFsdWVzJywgcmVzcG9uc2UuZGF0YS52YWx1ZXMpOwoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2VzKSB7CiAgICAgICAgICAgIF90aGlzMy51bnJlYWRNc2cgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChfdGhpczMudmFsdWVzLlVGX1RZUEUgPT0gJ9Cg0LXQutC70LDQvNCw0YbQuNGPJykgewogICAgICAgICAgICBCWC5hamF4LnJ1bkNvbXBvbmVudEFjdGlvbigneHBhZ2U6YWpheCcsICdnZXRTdGFmZkxpc3QnLCB7CiAgICAgICAgICAgICAgbW9kZTogJ2NsYXNzJywKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBmaWx0ZXI6ICfQnNC10L3QtdC00LbQtdGAINGA0LXQutC70LDQvNCw0YbQuNC+0L3QvdC+0LPQviDQvtGC0LTQtdC70LAnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlcnNGaWx0ZXJlZCA9IHJlc3BvbnNlLmRhdGEudXNlcnMuRklMVEVSRUQ7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlcnNBbGwgPSByZXNwb25zZS5kYXRhLnVzZXJzLkFMTDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChfdGhpczMudmFsdWVzLlVGX1RZUEUgPT0gbnVsbCkgewogICAgICAgICAgICBCWC5hamF4LnJ1bkNvbXBvbmVudEFjdGlvbigneHBhZ2U6YWpheCcsICdnZXRTdGFmZkxpc3QnLCB7CiAgICAgICAgICAgICAgbW9kZTogJ2NsYXNzJywKICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBmaWx0ZXI6ICfQntGC0LLQtdGC0YHRgtCy0LXQvdC90YvQuSDQv9C+INC30LDQv9GA0L7RgdCw0LwnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlcnNGaWx0ZXJlZCA9IHJlc3BvbnNlLmRhdGEudXNlcnMuRklMVEVSRUQ7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlcnNBbGwgPSByZXNwb25zZS5kYXRhLnVzZXJzLkFMTDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgQlguYWpheC5ydW5Db21wb25lbnRBY3Rpb24oJ3hwYWdlOmFqYXgnLCAnZ2V0U3RhZmZMaXN0JywgewogICAgICAgICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgZmlsdGVyOiAn0JzQtdC90LXQtNC20LXRgCcKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgIF90aGlzMy51c2Vyc0ZpbHRlcmVkID0gcmVzcG9uc2UuZGF0YS51c2Vycy5GSUxURVJFRDsKICAgICAgICAgICAgICAgIF90aGlzMy51c2Vyc0FsbCA9IHJlc3BvbnNlLmRhdGEudXNlcnMuQUxMOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZXRNZXNzYWdlc1JlYWQ6IGZ1bmN0aW9uIHNldE1lc3NhZ2VzUmVhZCgpIHsKICAgICAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdmFyIHVzZXJfeG1sID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7CgogICAgICBpZiAoaWQubGVuZ3RoKSB7CiAgICAgICAgQlguYWpheC5ydW5Db21wb25lbnRBY3Rpb24oJ3hwYWdlOmFqYXgnLCAnY2hhdFNldE1lc3NhZ2VzUmVhZCcsIHsKICAgICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgdXNlcl94bWw6IHVzZXJfeG1sCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHt9KTsKICAgICAgfQogICAgfSwKICAgIGFkZE1lc3NhZ2U6IGZ1bmN0aW9uIGFkZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudXNlclJlY2l2ZSA9PSAnJykgewogICAgICAgIGFsZXJ0KCfQktGL0LHQtdGA0LjRgtC1INC/0L7Qu9GD0YfQsNGC0LXQu9GPINGB0L7QvtCx0YnQtdC90LjRjyEnKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRleHQgPT0gJycpIHsKICAgICAgICBhbGVydCgn0JLQstC10LTQuNGC0LUg0YLQtdC60YHRgiDRgdC+0L7QsdGJ0LXQvdC40Y8hJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGZpbGVJbnB1dCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LWZpbGUnKTsKICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGRhdGEuYXBwZW5kKCdvcmRlcklkJywgdGhpcy5vcmRlcklkKTsKICAgICAgICBkYXRhLmFwcGVuZCgnY2xhaW1JZCcsIHRoaXMuY2xhaW1JZCk7CiAgICAgICAgZGF0YS5hcHBlbmQoJ3RleHQnLCB0aGlzLnRleHQpOwoKICAgICAgICBpZiAodGhpcy5zdWJqZWN0ID09ICcnKSB7CiAgICAgICAgICBkYXRhLmFwcGVuZCgnc3ViamVjdCcsIHRoaXMudGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGEuYXBwZW5kKCdzdWJqZWN0JywgdGhpcy5zdWJqZWN0KTsKICAgICAgICB9CgogICAgICAgIGRhdGEuYXBwZW5kKCd1c2VyUmVjaXZlJywgdGhpcy51c2VyUmVjaXZlKTsKICAgICAgICBkYXRhLmFwcGVuZCgnbWVzc2FnZVNlbGVjdCcsIHRoaXMubWVzc2FnZVNlbGVjdCk7CgogICAgICAgIGlmIChmaWxlSW5wdXQuZmlsZXMgJiYgZmlsZUlucHV0LmZpbGVzLmxlbmd0aCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlSW5wdXQuZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ2ZpbGVbXScsIGZpbGVJbnB1dC5maWxlc1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBCWC5hamF4LnJ1bkNvbXBvbmVudEFjdGlvbigneHBhZ2U6YWpheCcsICdjaGF0QWRkTWVzc2FnZScsIHsKICAgICAgICAgIG1vZGU6ICdjbGFzcycsCiAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzNC50ZXh0ID0gJyc7CgogICAgICAgICAgX3RoaXM0LmxvYWREYXRhKCk7CgogICAgICAgICAgX3RoaXM0LiRyZWZzLnRleHRBcmVhLmNsZWFyKCk7CgogICAgICAgICAgX3RoaXM0LnByZXBhcmVkRmlsZXMgPSBbXTsKICAgICAgICAgIGZpbGVJbnB1dC52YWx1ZSA9ICcnOwogICAgICAgICAgX3RoaXM0LnVzZXJSZWNpdmUgPSAnJywgX3RoaXM0Lm1lc3NhZ2VTZWxlY3QgPSAnJzsKICAgICAgICAgIF90aGlzNC5zdWJqZWN0ID0gJyc7CiAgICAgICAgICBfdGhpczQubWVzc2FnZVNlbGVjdFRleHQgPSAnJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbGVjdE1lc3NhZ2UoZSkgewogICAgICB0aGlzLm1lc3NhZ2VTZWxlY3QgPSBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVzc2FnZScpOwogICAgICB0aGlzLnVzZXJSZWNpdmUgPSBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0aG9yJyk7CiAgICAgIHRoaXMubWVzc2FnZVNlbGVjdFRleHQgPSBlLmN1cnJlbnRUYXJnZXQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTC5yZXBsYWNlKC88XC8/W14+XSsoPnwkKS9nLCAiIik7CiAgICAgIHZhciBzdWJqZWN0U3ViamVjdCA9IGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1zdWJqZWN0Jyk7CiAgICAgIHZhciBzdWJqZWN0VGV4dCA9IGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXh0Jyk7CiAgICAgIHZhciBzdWJqZWN0ID0gc3ViamVjdFN1YmplY3QgPyBzdWJqZWN0U3ViamVjdCA6IHN1YmplY3RUZXh0OwogICAgICB0aGlzLnN1YmplY3QgPSAnUmU6ICcgKyBzdWJqZWN0OwogICAgICAkKCcjc3RhZmYtc2VsZWN0JykuZW1wdHkoKTsKICAgICAgQlguYWpheC5ydW5Db21wb25lbnRBY3Rpb24oJ3hwYWdlOmFqYXgnLCAnZ2V0VXNlcicsIHsKICAgICAgICBtb2RlOiAnY2xhc3MnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHVzZXJfY29kZTogdGhpcy51c2VyUmVjaXZlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB2YXIgbmV3T3B0aW9uID0gbmV3IE9wdGlvbihyZXNwb25zZS5kYXRhLk5BTUUsIHJlc3BvbnNlLmRhdGEuWE1MX0lEKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFmZi1zZWxlY3QnKS5hcHBlbmQobmV3T3B0aW9uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICB0aGlzLm1lc3NhZ2VTZWxlY3QgPSAnJzsKICAgICAgdGhpcy51c2VyUmVjaXZlID0gJyc7CiAgICAgIHRoaXMubWVzc2FnZVNlbGVjdFRleHQgPSAnJzsKICAgICAgdGhpcy5zdWJqZWN0ID0gJyc7CiAgICAgICQoJyNzdGFmZi1zZWxlY3QnKS5lbXB0eSgpOwogICAgICB2YXIgbmV3T3B0aW9uID0gbmV3IE9wdGlvbign0JLRi9Cx0LXRgNC40YLQtSDQv9C+0LvRg9GH0LDRgtC10LvRjycsICcnKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YWZmLXNlbGVjdCcpLmFwcGVuZChuZXdPcHRpb24pOwogICAgICAkLmVhY2godGhpcy51c2Vyc0ZpbHRlcmVkLCBmdW5jdGlvbiAoaW5kZXgsIHVzZXIpIHsKICAgICAgICB2YXIgbmV3T3B0aW9uID0gbmV3IE9wdGlvbih1c2VyLk5BTUUsIHVzZXIuWE1MX0lEKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhZmYtc2VsZWN0JykuYXBwZW5kKG5ld09wdGlvbik7CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrT3JkZXI6IGZ1bmN0aW9uIGNoZWNrT3JkZXIob3JkZXJJRCwgY2xhaW1JRCkgewogICAgICBpZiAob3JkZXJJRCkgewogICAgICAgIHJldHVybiAnL2xrL29yZGVycy8/aWQ9JyArIG9yZGVySUQ7CiAgICAgIH0gZWxzZSBpZiAoY2xhaW1JRCkgewogICAgICAgIHJldHVybiAnL2xrL2NsYWltcy8/aWQ9JyArIG9yZGVySUQ7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja09yZGVyTmFtZTogZnVuY3Rpb24gY2hlY2tPcmRlck5hbWUob3JkZXJJRCwgY2xhaW1JRCkgewogICAgICBpZiAob3JkZXJJRCkgewogICAgICAgIHJldHVybiAn0JfQsNC60LDQtyDihJYnICsgb3JkZXJJRDsKICAgICAgfSBlbHNlIGlmIChjbGFpbUlEKSB7CiAgICAgICAgcmV0dXJuICfQl9Cw0L/RgNC+0YEg4oSWJyArIGNsYWltSUQ7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"\">\n        <div class=\"chat-open-btn\">\n            <img src=\"/local/templates/mossman2018/img/ico-chat.svg\" alt=\"\">\n        </div>\n        <div class=\"chat fixed active\">\n            <div v-if=\"unreadMsg  != ''\" class=\"chat-unread\">\n                <div class=\"chat-unread-head\">Непрочитанные сообщения</div>\n                <div class=\"chat-unread-left\">Отправитель</div>\n                <div class=\"chat-unread-right\">Документ</div>\n                <a v-for=\"item in unreadMsg\" :key=\"item.ID\" :href=\"checkOrder(item.ORDER_ID, item.CLAIM_ID)\" class=\"chat-unread__msg\">\n                    <div class=\"chat-unread__msg-sender\">{{ item.USER_NAME }}</div>\n                    <div class=\"chat-unread__msg-order\">{{ checkOrderName(item.ORDER_SEC_ID, item.CLAIM_SEC_ID) }}</div>\n                </a>\n            </div>\n            <div class=\"chat-header\">\n                <div class=\"chat-title\">Сообщения</div>\n                <div class=\"chat-btn\">\n                    <div class=\"chat-toggle\"><img src=\"/local/templates/mossman2018/img/ico-toggle-chat.svg\" alt=\"\"></div>\n                    <div class=\"chat-close\"><img src=\"/local/templates/mossman2018/img/ico-close-chat.svg\" alt=\"\"></div>\n                </div>\n            </div>\n            <div class=\"chat-body\">\n                <div class=\"chat-content\">\n                    <div v-for=\"(dateItems, date) in itemsByDate\" :key=\"date\" class=\"chat-items\">\n                        <div class=\"chat-date\"><span>{{ date }}</span></div>\n                        <div v-for=\"item in dateItems\" :key=\"item.ID\"\n                        class=\"chat-item\"\n                        :data-message=\"item.UF_CODE\"\n                        :data-author=\"item.UF_USER_CODE\"\n                        :data-subject=\"item.UF_SUBJECT\"\n                        :data-text=\"item.UF_TEXT\"\n                        :class=\"{\n                            'message-in' : item.UF_USER_ID != userData.ID && item.UF_USER_CODE != userData.XML_ID,\n                            'message-out' : item.UF_USER_ID == userData.ID || item.UF_USER_CODE == userData.XML_ID,\n                            'selected' : item.UF_CODE == messageSelect,\n                            }\"\n                            >\n                            <div class=\"sender-name color-text\">{{ [ item.USER_LAST_NAME, item.NAME, item.USER_SECOND_NAME, ].filter(v=>v).join(' ') }}</div>\n                            <div class=\"message-subject\"><div class=\"message-subject-head\">Тема: </div>{{ item.UF_SUBJECT }}</div>\n                            <div class=\"message-text\">\n                                {{ item.UF_TEXT }}\n                                <div v-if=\"item.files && item.files.length\" class=\"message-attach\">\n                                    <div v-for=\"file in item.files\" :key=\"file.id\" class=\"message-attach__item\">\n                                        <a :href=\"file.src\" target=\"_blank\" >{{ file.filename }}</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div v-if=\"item.UF_USER_ID != userData.ID && item.UF_USER_CODE != userData.XML_ID\" @click=\"selectMessage\" class=\"message-reply\">Ответить</div>\n                            <div class=\"message-time\"><span>{{ item.timeFormat }}</span></div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"chat-footer\">\n                    <div class=\"messenger-subject messenger-reply\">\n                        <div @click=\"resetForm\" class=\"chat-footer-reset-form\"></div>\n                        <label for=\"messenger-reply\">Первичное сообщение:</label>\n                        <input type=\"text\" id=\"messenger-reply\" name=\"messenger-reply\" :value=\"messageSelectText\" placeholder=\"Нажмите на сообщение для его выбора\" disabled>\n                    </div>\n                    <div class=\"messenger-staff-select\">\n                        <label for=\"staff-select\">Получатель:</label>\n                        <select name=\"staff-select\" id=\"staff-select\" v-model=\"userRecive\">\n                            <option value>Выберите получателя</option>\n                            <option v-for=\"user in this.usersFiltered\" v-bind:key=\"user.ID\" v-bind:value=\"user.XML_ID\">{{ user.NAME }}</option>\n                        </select>\n                    </div>\n                    <div class=\"messenger-subject\">\n                        <label for=\"messenger-subject-text\">Тема сообщения:</label>\n                        <input type=\"text\" id=\"messenger-subject-text\" v-model=\"subject\" name=\"messenger-subject-text\" placeholder=\"Напишите тему сообщения\">\n                    </div>\n                    <div class=\"messenger-textarea-wrap\">\n                        <div class=\"messenger-textarea\">\n                            <editable ref=\"textArea\" :content=\"text\" @update=\"text = $event\" class=\"messenger-textarea-input\" @keyup-enter=\"addMessage()\" ></editable>\n                            <span class=\"messenger-placeholder\">Оставьте комментарий...</span>\n                        </div>\n                        <label for=\"chat-file\" class=\"send-photo\">\n                            <img src=\"/local/templates/mossman2018/img/ico-photo-chat.svg\" alt=\"\">\n                        </label>\n                        <input @change=\"preparedFiles = $event.target.files\" id=\"chat-file\" multiple type=\"file\" style=\"display: none;\" />\n                    </div>\n                    <div @click.prevent=\"addMessage()\" class=\"send-message\">\n                        <img src=\"/local/templates/mossman2018/img/ico-send-chat.svg\" alt=\"\">\n                    </div>\n                    <div v-if=\"preparedFiles.length\" class=\"messenger-prepared-files\" >\n                        <div v-for=\"file in preparedFiles\" :key=\"file.lastModified\" class=\"messenger-prepared-files\" >\n                            {{ file.name }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport moment from 'moment';\nmoment.locale('ru');\nwindow.moment = moment;\n\nexport default {\n    name : 'Chat',\n    props : {\n        claimId : {\n            type : Number,\n            default : 0,\n        },\n        orderId : {\n            type : Number,\n            default : 0,\n        },\n        userData : {\n            type : Object,\n            default : () => ({}),\n        },\n    },\n    data : () => ({\n        preparedFiles : [],\n        items : [],\n        subject : '',\n        userRecive : '',\n        text : '',\n        values : {\n            UF_TYPE : '',\n            UF_CONTRACTOR : '',\n            UF_PRIMARY_ORDER : '',\n            UF_3CAD_SERVER_NUM : '',\n            UF_3CAD_SERVER_DATE : '',\n            UF_MODEL : '',\n            UF_SHIPMENT_ADDRESS : '',\n            UF_TRANSPORT_COMPANY : '',\n            UF_COMMENT : '',\n            UF_FACTORY_TITLE : '',\n            UF_SUM : '',\n            UF_ACCEPT_MNGR_DATE : '',\n            UF_PROCES_MNGR_DATE : '',\n            UF_PROCESS_TECH_DATE : '',\n            UF_INVOICE_NUM : '',\n            UF_INVOICE_DATE : '',\n            UF_INVOICE_SUM : '',\n            UF_INVOICE_ACPT_DATE : '',\n            UF_ACCOUNTING_DATE : '',\n            UF_PLAN_DATE : '',\n            UF_RESPONSIBLE_NAME : '',\n            UF_RESPONSIBLE_PHONE : '',\n            UF_STATUS : '',\n            UF_ACCEPTED_MANAGER : '',\n            UF_PROCESSED_MANAGER : '',\n            UF_PROCESSED_TECH : '',\n            UF_INVOICE_NAME : '',\n            UF_INVOICE_ACPT_NAME : '',\n            UF_ACCOUNTING_NAME : '',\n            UF_CONTRACTOR_CODE : '',\n            UF_INNER_CODE : '',\n            UF_3CAD_SERVER_NUM_NEW : '',\n            UF_CANCELED : 0,\n            UF_PAUSED : 0,\n        },\n        usersFiltered : '',\n        usersAll: '',\n        messageSelect : '',\n        messageSelectText : '',\n        userSelect : '',\n        unreadMsg : '',\n    }),\n    computed : {\n        itemsByDate () {\n            let itemsByDate = {}, item, m, date;\n            for (var i = 0; i < this.items.length; i++) {\n                item = this.items[i];\n                m = moment.unix(item.timestamp);\n                date = m.format('DD MMMM YYYY');\n                if (!itemsByDate[date]) {\n                    itemsByDate[date] = [];\n                }\n                item.timeFormat = m.format('HH:mm');\n                itemsByDate[date].push(item);\n            }\n            return itemsByDate;\n        },\n    },\n    mounted () {\n        setInterval(()=>{\n            this.loadData();\n        },5000);        \n\n        $('.lc-cont').each(function(){\n            var sticky =  $('.chat-open-btn');\n            var stickyWrap = $('.lc-cont')\n\n            $(window).scroll(function(){\n                var nsc = $(document).scrollTop();\n                var bp1 = stickyWrap.offset().top;\n                var bp2 = bp1 + stickyWrap.outerHeight()-$(window).height();\n                if (nsc>bp1) {\n                    sticky.css('position','fixed');\n                    sticky.addClass('fixed');\n                }\n                else {\n                    sticky.css('position','absolute');\n                    sticky.css('top', '0 !important');\n                    sticky.removeClass('fixed');\n                }\n                if (nsc>bp2) {\n                    sticky.css('top', bp2-nsc);\n                }\n                else {\n                    sticky.css('top', '245px');\n                }\n            });\n        });\n\n        $('.chat-open-btn').on('click', function(){\n            $('.chat').toggleClass('active');\n        });\n\n        $('.chat-close').on('click', function(){\n            $('.chat').removeClass('active');\n        });\n\n        $('.chat-toggle').on('click', function(){\n            $('.chat-body').slideToggle();\n        });\n\n        $(window).scroll(function(){\n            let heightToBottomEdge = $(window).scrollTop() + window.innerHeight;\n            let canSeeFooter = heightToBottomEdge > $('.footer').offset().top;\n            if(canSeeFooter && !window.absoluted)\n            {\n                $('.chat').toggleClass('absolute');\n                $('.chat').toggleClass('fixed');\n                window.absoluted=true;\n            }\n\n            if(!canSeeFooter && window.absoluted)\n            {\n                $('.chat').toggleClass('absolute');\n                $('.chat').toggleClass('fixed');\n                window.absoluted=false;\n            }\n\n        });\n    },\n    watch : {\n\t\titems (messages, oldMessages) {\n\t\t\tif (messages.length != oldMessages.length) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$el.querySelector('.chat-content').scrollTop = this.$el.querySelector('.chat-content').scrollHeight - this.$el.querySelector('.chat-content').clientHeight;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t},\n    },\n    methods : {\n        loadData () {\n            BX.ajax.runComponentAction('xpage:ajax', 'chatLoadData', {\n                mode : 'class',\n                data : {\n                    claimId : this.claimId,\n                    orderId : this.orderId,\n                    userXML : this.userData.XML_ID,\n                    userID : this.userData.ID\n                },\n            }).then(response => {\n                if (response.data) {\n                    if (response.data.items && response.data.items.length) {\n                        let unreadMsgIds = [];\n                        let items = response.data.items;\n                        for (var i = 0; i < items.length; i++) {\n                            if (items[i].UF_READ_USER_ID_NEW) {\n                                items[i].UF_READ_USER_ID_NEW = items[i].UF_READ_USER_ID_NEW.split(',');\n                            }\n                            if (!items[i].UF_READ_USER_ID_NEW || !~items[i].UF_READ_USER_ID_NEW.indexOf(+this.userData.ID)) {\n                                unreadMsgIds.push(items[i].ID);\n                            }\n                        }\n                    \n                        this.items = items;\n                        if (unreadMsgIds.length && document.querySelector('.chat-body').offsetParent) {\n                            this.setMessagesRead(unreadMsgIds, this.userData.XML_ID);\n                        }\n                    }\n                    this.$set(this, 'values', response.data.values);\n                    if(response.data.messages) {\n                        this.unreadMsg = response.data.messages;\n                    }\n                    if(this.values.UF_TYPE == 'Рекламация') {\n                        BX.ajax.runComponentAction('xpage:ajax', 'getStaffList', {\n                            mode : 'class',\n                            data : {\n                                filter : 'Менеджер рекламационного отдела'\n                            },\n                        }).then(response => {\n                            if (response.data) {\n                                this.usersFiltered = response.data.users.FILTERED;\n                                this.usersAll = response.data.users.ALL;\n                            }\n                        });\n                    } else if (this.values.UF_TYPE == null) {\n                        BX.ajax.runComponentAction('xpage:ajax', 'getStaffList', {\n                            mode : 'class',\n                            data : {\n                                filter : 'Ответственный по запросам'\n                            },\n                        }).then(response => {\n                            if (response.data) {\n                                this.usersFiltered = response.data.users.FILTERED;\n                                this.usersAll = response.data.users.ALL;\n                            }\n                        });\n                    } else {\n                        BX.ajax.runComponentAction('xpage:ajax', 'getStaffList', {\n                            mode : 'class',\n                            data : {\n                                filter : 'Менеджер'\n                            },\n                        }).then(response => {\n                            if (response.data) {\n                                this.usersFiltered = response.data.users.FILTERED;\n                                this.usersAll = response.data.users.ALL;\n                            }\n                        });\n                    }\n                }\n            });\n         },\n        setMessagesRead (id = [], user_xml) {\n            if (id.length) {\n                BX.ajax.runComponentAction('xpage:ajax', 'chatSetMessagesRead', {\n                    mode : 'class',\n                    data : {\n                        id, user_xml, \n                    },\n                }).then(response => {\n\n                });\n            }\n        },\n        addMessage () {\n            if(this.userRecive == '') {\n                alert('Выберите получателя сообщения!');\n            } else if (this.text == '') {\n                alert('Введите текст сообщения!');\n            } else {\n                let fileInput = this.$el.querySelector('#chat-file');\n                let data = new FormData;\n                data.append('orderId', this.orderId);\n                data.append('claimId', this.claimId);\n                data.append('text', this.text);\n                if(this.subject == '') {\n                    data.append('subject', this.text);\n                } else {\n                    data.append('subject', this.subject);\n                }\n                data.append('userRecive', this.userRecive);\n                data.append('messageSelect', this.messageSelect);\n                if (fileInput.files && fileInput.files.length) {\n                    for (var i = 0; i < fileInput.files.length; i++) {\n                        data.append('file[]', fileInput.files[i]);\n                    }\n                }\n                BX.ajax.runComponentAction('xpage:ajax', 'chatAddMessage', {\n                    mode : 'class',\n                    data,\n                }).then(response => {\n                    this.text = '';\n                    this.loadData();\n                    this.$refs.textArea.clear();\n                    this.preparedFiles = [];\n                    fileInput.value = '';\n                    this.userRecive = '',\n                    this.messageSelect = '';\n                    this.subject = '';\n                    this.messageSelectText = '';\n                });\n            }\n            \n        },\n        selectMessage (e) {\n            this.messageSelect = e.currentTarget.parentNode.getAttribute('data-message');\n            this.userRecive = e.currentTarget.parentNode.getAttribute('data-author');\n            this.messageSelectText = e.currentTarget.previousSibling.innerHTML.replace(/<\\/?[^>]+(>|$)/g, \"\");\n            let subjectSubject = e.currentTarget.parentNode.getAttribute('data-subject');\n            let subjectText = e.currentTarget.parentNode.getAttribute('data-text');\n            let subject = subjectSubject ? subjectSubject : subjectText;\n            this.subject = 'Re: ' + subject;\n            $('#staff-select').empty();\n            BX.ajax.runComponentAction('xpage:ajax', 'getUser', {\n                mode : 'class',\n                data : {\n                    user_code : this.userRecive\n                },\n            }).then(response => {\n                if (response.data) {\n                    let newOption = new Option(response.data.NAME, response.data.XML_ID);\n                    document.getElementById('staff-select').append(newOption);\n                }\n            });\n            \n        },\n        resetForm() {\n            this.messageSelect = '';\n            this.userRecive = '';\n            this.messageSelectText = '';\n            this.subject = '';\n            $('#staff-select').empty();\n            let newOption = new Option('Выберите получателя', '');\n            document.getElementById('staff-select').append(newOption);\n            $.each(this.usersFiltered, function(index, user) {\n                let newOption = new Option(user.NAME, user.XML_ID);\n                document.getElementById('staff-select').append(newOption);\n            });\n        },\n        checkOrder(orderID, claimID) {\n            if(orderID) {\n                return '/lk/orders/?id=' + orderID;\n            } else if (claimID) {\n                return '/lk/claims/?id=' + orderID;\n            } \n        },\n        checkOrderName(orderID, claimID) {\n            if(orderID) {\n                return 'Заказ №' + orderID;\n            } else if (claimID) {\n                return 'Запрос №' + claimID;\n            } \n        },\n    },\n}\n</script>\n"],"sourceRoot":"src/components"}]}