{"map":"{\"version\":3,\"sources\":[\"js/chunk-f5929552.js\"],\"names\":[\"window\",\"push\",\"b301\",\"module\",\"exports\",\"__webpack_require__\",\"fails\",\"METHOD_NAME\",\"argument\",\"method\",\"call\",\"c975\",\"$\",\"$indexOf\",\"indexOf\",\"sloppyArrayMethod\",\"nativeIndexOf\",\"NEGATIVE_ZERO\",\"SLOPPY_METHOD\",\"target\",\"proto\",\"forced\",\"searchElement\",\"apply\",\"this\",\"arguments\",\"length\",\"undefined\",\"e6b0\",\"__webpack_exports__\",\"r\",\"render\",\"_vm\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"_m\",\"staticClass\",\"_l\",\"dateItems\",\"date\",\"key\",\"_v\",\"_s\",\"item\",\"ID\",\"class\",\"message-in\",\"UF_USER_ID\",\"userData\",\"UF_USER_CODE\",\"XML_ID\",\"message-out\",\"USER_LAST_NAME\",\"NAME\",\"USER_SECOND_NAME\",\"filter\",\"v\",\"join\",\"UF_TEXT\",\"files\",\"file\",\"id\",\"attrs\",\"href\",\"src\",\"filename\",\"_e\",\"timeFormat\",\"ref\",\"content\",\"text\",\"on\",\"update\",\"$event\",\"keyup-enter\",\"addMessage\",\"staticStyle\",\"display\",\"multiple\",\"type\",\"change\",\"preparedFiles\",\"click\",\"preventDefault\",\"alt\",\"lastModified\",\"name\",\"staticRenderFns\",\"value\",\"for\",\"moment\",\"moment_default\",\"n\",\"a\",\"locale\",\"Chatvue_type_script_lang_js_\",\"props\",\"claimId\",\"Number\",\"default\",\"orderId\",\"Object\",\"data\",\"items\",\"computed\",\"itemsByDate\",\"m\",\"i\",\"unix\",\"timestamp\",\"format\",\"mounted\",\"_this\",\"setInterval\",\"loadData\",\"each\",\"sticky\",\"stickyWrap\",\"scroll\",\"nsc\",\"document\",\"scrollTop\",\"bp1\",\"offset\",\"top\",\"bp2\",\"outerHeight\",\"height\",\"css\",\"addClass\",\"removeClass\",\"toggleClass\",\"slideToggle\",\"heightToBottomEdge\",\"innerHeight\",\"canSeeFooter\",\"absoluted\",\"watch\",\"messages\",\"oldMessages\",\"_this2\",\"setTimeout\",\"$el\",\"querySelector\",\"scrollHeight\",\"clientHeight\",\"methods\",\"_this3\",\"BX\",\"ajax\",\"runComponentAction\",\"mode\",\"then\",\"response\",\"unreadMsgIds\",\"UF_READ_USER_ID\",\"map\",\"offsetParent\",\"setMessagesRead\",\"_this4\",\"fileInput\",\"FormData\",\"append\",\"$refs\",\"textArea\",\"clear\",\"components_Chatvue_type_script_lang_js_\",\"componentNormalizer\",\"component\"],\"mappings\":\"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\"}","code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f5929552\"],{b301:function(t,e,a){\"use strict\";var s=a(\"d039\");t.exports=function(t,e){var a=[][t];return!a||!s((function(){a.call(null,e||function(){throw 1},1)}))}},c975:function(t,e,a){\"use strict\";var s=a(\"23e7\"),i=a(\"4d64\").indexOf,n=a(\"b301\"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,l=n(\"indexOf\");s({target:\"Array\",proto:!0,forced:o||l},{indexOf:function(t){return o?c.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},e6b0:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{},[t._m(0),a(\"div\",{staticClass:\"chat fixed active\"},[t._m(1),a(\"div\",{staticClass:\"chat-body\"},[a(\"div\",{staticClass:\"chat-content\"},t._l(t.itemsByDate,(function(e,s){return a(\"div\",{key:s,staticClass:\"chat-items\"},[a(\"div\",{staticClass:\"chat-date\"},[a(\"span\",[t._v(t._s(s))])]),t._l(e,(function(e){return a(\"div\",{key:e.ID,staticClass:\"chat-item\",class:{\"message-in\":e.UF_USER_ID!=t.userData.ID&&e.UF_USER_CODE!=t.userData.XML_ID,\"message-out\":e.UF_USER_ID==t.userData.ID||e.UF_USER_CODE==t.userData.XML_ID}},[a(\"div\",{staticClass:\"sender-name color-text\"},[t._v(t._s([e.USER_LAST_NAME,e.NAME,e.USER_SECOND_NAME].filter((function(t){return t})).join(\" \")))]),a(\"div\",{staticClass:\"message-text\"},[t._v(\" \"+t._s(e.UF_TEXT)+\" \"),e.files&&e.files.length?a(\"div\",{staticClass:\"message-attach\"},t._l(e.files,(function(e){return a(\"div\",{key:e.id,staticClass:\"message-attach__item\"},[a(\"a\",{attrs:{href:e.src,target:\"_blank\"}},[t._v(t._s(e.filename))])])})),0):t._e()]),a(\"div\",{staticClass:\"message-time\"},[a(\"span\",[t._v(t._s(e.timeFormat))])])])}))],2)})),0),a(\"div\",{staticClass:\"chat-footer\"},[t._m(2),a(\"div\",{staticClass:\"messenger-textarea-wrap\"},[a(\"div\",{staticClass:\"messenger-textarea\"},[a(\"editable\",{ref:\"textArea\",staticClass:\"messenger-textarea-input\",attrs:{content:t.text},on:{update:function(e){t.text=e},\"keyup-enter\":function(e){return t.addMessage()}}}),a(\"span\",{staticClass:\"messenger-placeholder\"},[t._v(\"Оставьте комментарий...\")])],1),t._m(3),a(\"input\",{staticStyle:{display:\"none\"},attrs:{id:\"chat-file\",multiple:\"\",type:\"file\"},on:{change:function(e){t.preparedFiles=e.target.files}}})]),a(\"div\",{staticClass:\"send-message\",on:{click:function(e){return e.preventDefault(),t.addMessage()}}},[a(\"img\",{attrs:{src:\"/local/templates/mossman2018/img/ico-send-chat.svg\",alt:\"\"}})]),t.preparedFiles.length?a(\"div\",{staticClass:\"messenger-prepared-files\"},t._l(t.preparedFiles,(function(e){return a(\"div\",{key:e.lastModified,staticClass:\"messenger-prepared-files\"},[t._v(\" \"+t._s(e.name)+\" \")])})),0):t._e()])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"chat-open-btn\"},[a(\"img\",{attrs:{src:\"/local/templates/mossman2018/img/ico-chat.svg\",alt:\"\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"chat-header\"},[a(\"div\",{staticClass:\"chat-title\"},[t._v(\"Комментарии\")]),a(\"div\",{staticClass:\"chat-btn\"},[a(\"div\",{staticClass:\"chat-toggle\"},[a(\"img\",{attrs:{src:\"/local/templates/mossman2018/img/ico-toggle-chat.svg\",alt:\"\"}})]),a(\"div\",{staticClass:\"chat-close\"},[a(\"img\",{attrs:{src:\"/local/templates/mossman2018/img/ico-close-chat.svg\",alt:\"\"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"messenger-staff-select\"},[a(\"select\",{attrs:{name:\"staff-select\",id:\"staff-select\"}},[a(\"option\",{attrs:{value:\"Сергей\"}},[t._v(\"Сергей\")]),a(\"option\",{attrs:{value:\"Иван\"}},[t._v(\"Иван\")]),a(\"option\",{attrs:{value:\"Леша\"}},[t._v(\"Леша\")]),a(\"option\",{attrs:{value:\"Миша\"}},[t._v(\"Миша\")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"label\",{staticClass:\"send-photo\",attrs:{for:\"chat-file\"}},[a(\"img\",{attrs:{src:\"/local/templates/mossman2018/img/ico-photo-chat.svg\",alt:\"\"}})])}],n=(a(\"c975\"),a(\"d81d\"),a(\"a9e3\"),a(\"c1df\")),c=a.n(n);c.a.locale(\"ru\"),window.moment=c.a;var o={name:\"Chat\",props:{claimId:{type:Number,default:0},orderId:{type:Number,default:0},userData:{type:Object,default:function(){return{}}}},data:function(){return{preparedFiles:[],items:[],text:\"\"}},computed:{itemsByDate:function(){for(var t,e,a,s={},i=0;i<this.items.length;i++)t=this.items[i],e=c.a.unix(t.timestamp),a=e.format(\"DD MMMM YYYY\"),s[a]||(s[a]=[]),t.timeFormat=e.format(\"HH:mm\"),s[a].push(t);return s}},mounted:function(){var t=this;setInterval((function(){t.loadData()}),5e3),$(\".lc-cont\").each((function(){var t=$(\".chat-open-btn\"),e=$(\".lc-cont\");$(window).scroll((function(){var a=$(document).scrollTop(),s=e.offset().top,i=s+e.outerHeight()-$(window).height();a>s?(t.css(\"position\",\"fixed\"),t.addClass(\"fixed\")):(t.css(\"position\",\"absolute\"),t.css(\"top\",\"0 !important\"),t.removeClass(\"fixed\")),a>i?t.css(\"top\",i-a):t.css(\"top\",\"245px\")}))})),$(\".chat-open-btn\").on(\"click\",(function(){$(\".chat\").toggleClass(\"active\")})),$(\".chat-close\").on(\"click\",(function(){$(\".chat\").removeClass(\"active\")})),$(\".chat-toggle\").on(\"click\",(function(){$(\".chat-body\").slideToggle()})),$(window).scroll((function(){var t=$(window).scrollTop()+window.innerHeight,e=t>$(\".footer\").offset().top;e&&!window.absoluted&&($(\".chat\").toggleClass(\"absolute\"),$(\".chat\").toggleClass(\"fixed\"),window.absoluted=!0),!e&&window.absoluted&&($(\".chat\").toggleClass(\"absolute\"),$(\".chat\").toggleClass(\"fixed\"),window.absoluted=!1)}))},watch:{items:function(t,e){var a=this;t.length!=e.length&&setTimeout((function(){a.$el.querySelector(\".chat-content\").scrollTop=a.$el.querySelector(\".chat-content\").scrollHeight-a.$el.querySelector(\".chat-content\").clientHeight}),300)}},methods:{loadData:function(){var t=this;BX.ajax.runComponentAction(\"xpage:ajax\",\"chatLoadData\",{mode:\"class\",data:{claimId:this.claimId,orderId:this.orderId}}).then((function(e){if(e.data&&e.data.items&&e.data.items.length){for(var a=[],s=e.data.items,i=0;i<s.length;i++)s[i].UF_READ_USER_ID&&(s[i].UF_READ_USER_ID=s[i].UF_READ_USER_ID.map((function(t){return+t}))),s[i].UF_READ_USER_ID&&~s[i].UF_READ_USER_ID.indexOf(+t.userData.ID)||a.push(s[i].ID);t.items=s,a.length&&document.querySelector(\".chat-body\").offsetParent&&t.setMessagesRead(a)}}))},setMessagesRead:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&BX.ajax.runComponentAction(\"xpage:ajax\",\"chatSetMessagesRead\",{mode:\"class\",data:{id:t}}).then((function(t){}))},addMessage:function(){var t=this,e=this.$el.querySelector(\"#chat-file\"),a=new FormData;if(a.append(\"orderId\",this.orderId),a.append(\"claimId\",this.claimId),a.append(\"text\",this.text),e.files&&e.files.length)for(var s=0;s<e.files.length;s++)a.append(\"file[]\",e.files[s]);BX.ajax.runComponentAction(\"xpage:ajax\",\"chatAddMessage\",{mode:\"class\",data:a}).then((function(a){t.text=\"\",t.loadData(),t.$refs.textArea.clear(),t.preparedFiles=[],e.value=\"\"}))}}},l=o,r=a(\"2877\"),d=Object(r[\"a\"])(l,s,i,!1,null,null,null);e[\"default\"]=d.exports}}]);","extractedComments":[]}