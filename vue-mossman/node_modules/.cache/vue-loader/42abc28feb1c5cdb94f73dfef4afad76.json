{"remainingRequest":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/OrderList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/src/components/OrderList.vue","mtime":1608880013878},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bokus/Desktop/secretproject/bitrix/local/vue-mossman/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgcGFnZXJNaXhpbiBmcm9tICcuLi9taXhpbnMvUGFnZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdPcmRlckxpc3QnLAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgfSwKICAgIHdhdGNoIDogewogICAgICAgIHBhZ2VOdW0gKHZhbCwgb2xkVmFsKSB7CiAgICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICB9LAogICAgICAgIGZpbHRlciA6IHsKICAgICAgICAgICAgZGVlcCA6IHRydWUsCiAgICAgICAgICAgIGhhbmRsZXIgKCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVyVGltZW91dCk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICAgICAgICAgICAgfSwxMDAwKTsKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgfSwKICAgIG1peGlucyA6IFsKICAgICAgICBwYWdlck1peGluLAogICAgXSwKICAgIGRhdGEgOiAoKSA9PiAoewogICAgICAgIGNpdGllcyA6IFtdLAogICAgICAgIHR5cGVzIDogW10sCiAgICAgICAgc3RhdHVzZXMgOiBbXSwKICAgICAgICBpdGVtcyA6IFtdLAogICAgICAgIGZpbHRlclRpbWVvdXQgOiBudWxsLAogICAgICAgIGZpbHRlckJ5VXNlcnM6IFtdLAogICAgICAgIGZpbHRlciA6IHsKICAgICAgICAgICAgY2l0eSA6ICcnLAogICAgICAgICAgICB0eXBlIDogJycsCiAgICAgICAgICAgIHN0YXR1cyA6ICcnLAogICAgICAgICAgICBvcmRlck51bSA6ICcnLAogICAgICAgICAgICBpbnZvaWNlTnVtIDogJycsCiAgICAgICAgICAgIGlubmVyQ29kZSA6ICcnLAogICAgICAgICAgICB1c2VyIDogJycsCiAgICAgICAgfSwKICAgIH0pLAogICAgbWV0aG9kcyA6IHsKICAgICAgICBsb2FkRGF0YSAoKSB7CiAgICAgICAgICAgIEJYLmFqYXgucnVuQ29tcG9uZW50QWN0aW9uKCd4cGFnZTphamF4JywgJ29yZGVyc0dldExpc3QnLCB7CiAgICAgICAgICAgICAgICBtb2RlIDogJ2NsYXNzJywKICAgICAgICAgICAgICAgIGRhdGEgOiB7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyIDogdGhpcy5maWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgcGFnZU51bSA6IHRoaXMucGFnZU51bSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlLmRhdGEuaXRlbXMgfHwgW107CiAgICAgICAgICAgICAgICB0aGlzLmNpdGllcyA9IHJlc3BvbnNlLmRhdGEuY2l0aWVzIHx8IFtdOwogICAgICAgICAgICAgICAgdGhpcy50eXBlcyA9IHJlc3BvbnNlLmRhdGEudHlwZXMgfHwgW107CiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c2VzID0gcmVzcG9uc2UuZGF0YS5zdGF0dXNlcyB8fCBbXTsKICAgICAgICAgICAgICAgIHRoaXMucGFnZXNDbnQgPSArcmVzcG9uc2UuZGF0YS5wYWdlc0NudCB8fCAwOwogICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJCeVVzZXJzID0gcmVzcG9uc2UuZGF0YS5maWx0ZXJCeVVzZXJzIHx8IFtdOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgfSwKfQo="},{"version":3,"sources":["OrderList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"lc-body\">\n    <div class=\"lc__top\">\n        <div class=\"lc-select-cont\">\n            <form action=\"\">\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.city\" >\n                        <option value=\"\">Выбрать город</option>\n                        <option v-for=\"(city, cityKey) in cities\" :key=\"cityKey\" >{{ city }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.type\" >\n                        <option value=\"\">Выбрать тип</option>\n                        <option v-for=\"(type, typeKey) in types\" :key=\"typeKey\" >{{ type }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-select\">\n                    <select v-model=\"filter.status\" >\n                        <option value=\"\">Выбрать статус</option>\n                        <option v-for=\"(status, statusKey) in statuses\" :key=\"statusKey\" >{{ status }}</option>\n                    </select>\n                </div>\n                <div v-if=\"this.filterByUsers\" class=\"lc-select\">\n                    <select v-model=\"filter.user\" >\n                        <option value=\"\">Выбрать ответственного</option>\n                        <option v-for=\"(user, userKey) in filterByUsers\" :key=\"userKey\" v-bind:value=\"user\">{{ userKey }}</option>\n                    </select>\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Номер заказа</div>\n                    <input v-model=\"filter.orderNum\" class=\"\" />\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Номер счёта</div>\n                    <input v-model=\"filter.invoiceNum\" class=\"\" />\n                </div>\n                <div class=\"lc-input\">\n                    <div class=\"info-tile\">Внутренний номер</div>\n                    <input v-model=\"filter.innerCode\" class=\"\" />\n                </div>\n            </form>\n        </div>\n        <a href=\"/lk/orders/?id=0\" class=\"lc-request-create\">Создать заказ</a>\n    </div>\n    <div class=\"lc-table\">\n        <div class=\"lc-table__list order-list\">\n            <div class=\"lc-table__head\">\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-number\">Номер заказа</div>\n                    <div class=\"lc-table__col col-date\">Дата заказа</div>\n                    <div class=\"lc-table__col col-city\">Внутренний номер</div>\n                    <div class=\"lc-table__col col-status\">Статус</div>\n                    <div class=\"lc-table__col col-btn\"></div>\n                </div>\n            </div>\n            <div v-for=\"item in items\" :key=\"item.ID\" class=\"lc-table__item order-item\" :class=\"{ 'lc-table__item--unread-messages' : item.hasUnreadMessages, }\" >\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-number\">\n                        <div class=\"order-number title\">Заказ №{{ item.UF_ORDER_NUM }}</div>\n                    </div>\n                    <div class=\"lc-table__col col-date\"><span class=\"table__col-name\">Дата заказа:</span>{{ item.UF_DATE_ADDED }}</div>\n                    <div class=\"lc-table__col col-city\"><span class=\"table__col-name\">Внутренний номер:</span>{{ item.UF_INNER_CODE }}</div>\n                    <div class=\"lc-table__col col-status\"><span class=\"table__col-name\">Статус:</span><div class=\"status ready\">{{ item.UF_STATUS }}</div></div>\n                    <div class=\"lc-table__col col-btn\">\n                        <a :href=\"`/lk/orders/?id=${item.ID}`\" class=\"btn lc-btn\">Подробнее</a>\n                    </div>\n                </div>\n                <div class=\"lc-table__row\">\n                    <div class=\"lc-table__col col-info\">\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Контрагент:</span> <b>{{ item.UF_CONTRACTOR }}</b></div>\n                            <div class=\"line-name-dop-dop\"><span class=\"line-name line-name-sum\">Сумма счета: </span><b>{{ item.UF_INVOICE_SUM }}</b></div>\n                        </div>\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Дата отгрузки:</span> <b>{{ item.UF_SHIPMENT_DATE }}</b></div>\n                        </div>\n                        <div class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Ответственный:</span> <b>{{ item.UF_RESPONSIBLE_NAME }}</b></div>\n                        </div>\n                        <div v-if=\"item.UF_MODEL\" class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Модель:</span> <b>{{ item.UF_MODEL }}</b></div>\n                            <div class=\"line-name-dop-dop\"><span class=\"line-name line-name-paid\">Сумма оплаты: </span><b>{{ item.UF_PAYED_SUM }}</b></div>\n                        </div>\n                        <div v-if=\"item.UF_INVOICE_NUM\" class=\"col-info-line\" >\n                            <div class=\"line-name-dop\"><span class=\"line-name\">Счёт:</span> <b>№{{ item.UF_INVOICE_NUM }}</b> ({{ item.UF_INVOICE_DATE }})</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <pagination v-if=\"pagesCnt > 1\" v-model=\"pageNum\" :pages-cnt=\"pagesCnt\" ></pagination>\n    </div>\n</div>\n</template>\n\n<script>\n\nimport pagerMixin from '../mixins/Pager.vue';\n\nexport default {\n    name: 'OrderList',\n    mounted () {\n        this.loadData();\n    },\n    watch : {\n        pageNum (val, oldVal) {\n            this.loadData();\n        },\n        filter : {\n            deep : true,\n            handler () {\n                clearTimeout(this.filterTimeout);\n                this.filterTimeout = setTimeout(()=>{\n                    this.loadData();\n                },1000);\n            },\n        },\n    },\n    mixins : [\n        pagerMixin,\n    ],\n    data : () => ({\n        cities : [],\n        types : [],\n        statuses : [],\n        items : [],\n        filterTimeout : null,\n        filterByUsers: [],\n        filter : {\n            city : '',\n            type : '',\n            status : '',\n            orderNum : '',\n            invoiceNum : '',\n            innerCode : '',\n            user : '',\n        },\n    }),\n    methods : {\n        loadData () {\n            BX.ajax.runComponentAction('xpage:ajax', 'ordersGetList', {\n                mode : 'class',\n                data : {\n                    filter : this.filter,\n                    pageNum : this.pageNum,\n                },\n            }).then(response => {\n                this.items = response.data.items || [];\n                this.cities = response.data.cities || [];\n                this.types = response.data.types || [];\n                this.statuses = response.data.statuses || [];\n                this.pagesCnt = +response.data.pagesCnt || 0;\n                this.filterByUsers = response.data.filterByUsers || [];\n            });\n        },\n    },\n}\n</script>\n"]}]}